% Master1 CORO 
% Classical Control
% exercise 1 of lab1

% MATLABã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ä¸€åº¦ã«ã™ã¹ã¦ã®å¤‰æ•°ã‚’ã‚¯ãƒªã‚¢ã—ã€ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¦ã‚³ãƒãƒ³ãƒ‰ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ã‚¯ãƒªã‚¢
clear all, close all, clc

disp('section 3.1')
disp('---------------------------------------------')

num = 1;
den = [0.5, 1.5, 1];

G = tf(num, den);

c1 = -10;
c2 = -0.25;
c3 = -0.1;
c4 = 0.1;
c5 = 0.25;
c6 = 10;

cnum1 = [-1, c1];
cden1 = [0.5*c1, 1.5*c1, c1];
cnum2 = [-1, c2];
cden2 = [0.5*c2, 1.5*c2, c2];
cnum3 = [-1, c3];
cden3 = [0.5*c3, 1.5*c3, c3];
cnum4 = [-1, c4];
cden4 = [0.5*c4, 1.5*c4, c4];
cnum5 = [-1, c5];
cden5 = [0.5*c5, 1.5*c5, c5];
cnum6 = [-1, c6];
cden6 = [0.5*c6, 1.5*c6, c6];

Gc1 = tf(cnum1, cden1);
Gc2 = tf(cnum2, cden2);
Gc3 = tf(cnum3, cden3);
Gc4 = tf(cnum4, cden4);
Gc5 = tf(cnum5, cden5);
Gc6 = tf(cnum6, cden6);

f1=figure(1);
set(f1,'position',[1   462   504   343])
plot(111)

% æœ€å¾Œã®6ãŒdurationã®é•·ã•ã‚’æ±ºã‚ã¦ã‚‹
step(G, Gc1, Gc2, Gc3, Gc4, Gc5, Gc6, 6);
% step(G,'b',Gc1, 'rx', Gc2, 'gx', Gc3,'cx', Gc4,'c',Gc5,'g',Gc6,'r', 6);
legend('G(c)', 'Gc(s)[c=-10]', 'Gc(s)[c=-0.25]', 'Gc(s)[c=-0.1]', 'Gc(s)[c=0.1]', 'Gc(s)[c=0.25]', 'Gc(s)[c=10]')

% ã‚°ãƒ©ãƒ•ã®ç·šç¨®ã¨è‰²ã‚’èª¿æ•´
set(findall(gcf,'Type','line'),'Linewidth',1.5);  % ç·šã®å¤ªã•ã‚’æ•´èª¿

f2=figure(2);
plot(111)
pzmap(G,Gc1, Gc2, Gc3, Gc4, Gc5, Gc6);
legend('G(c)', 'Gc(s)[c=-10]', 'Gc(s)[c=-0.25]', 'Gc(s)[c=-0.1]', 'Gc(s)[c=0.1]', 'Gc(s)[c=0.25]', 'Gc(s)[c=10]')

% ã‚°ãƒ©ãƒ•ã®ç·šç¨®ã¨è‰²ã‚’èª¿æ•´
set(findall(gcf,'Type','line'),'Linewidth',1.5);  % ç·šã®å¤ªã•ã‚’æ•´èª¿

S  = stepinfo(G);
S1 = stepinfo(Gc1);
S2 = stepinfo(Gc2);
S3 = stepinfo(Gc3);
S4 = stepinfo(Gc4);
S5 = stepinfo(Gc5);
S6 = stepinfo(Gc6);

% ã‚ªãƒ¼ãƒãƒ¼ã‚·ãƒ¥ãƒ¼ãƒˆï¼šã‚¹ãƒ†ãƒƒãƒ—å¿œç­”ã®ãƒ”ãƒ¼ã‚¯åœ°ã¨ç›®æ¨™å€¤ã®å·®
%              ã€€ã‚ªãƒ¼ãƒãƒ¼ã‚·ãƒ¥ãƒ¼ãƒˆãŒãªã„å ´åˆï¼Œã“ã®å€¤ã¯ï¼
disp(['the percent overshoot of G :',num2str(S1.Overshoot)])
disp(['the percent overshoot of Gc1 (c1=-10) :',num2str(S1.Overshoot)])
disp(['the percent overshoot of Gc2 (c2=-0.25) :',num2str(S2.Overshoot)])
disp(['the percent overshoot of Gc3 (c3=-0.1) :',num2str(S3.Overshoot)])
disp(['the percent undershoot of Gc4 (c4=0.1) :',num2str(S4.Undershoot)])
disp(['the percent undershoot of Gc4 (c5=0.25) :',num2str(S5.Undershoot)])
disp(['the percent undershoot of Gc4 (c6=10) :',num2str(S6.Undershoot)])
disp(' ')

%{
----- ğŸ‘‡seté–¢æ•°ã®èª¬æ˜ğŸ‘‡ -----
set(f1,'position',[1 462 504 343]) ã®ã‚³ãƒ¼ãƒ‰ã¯ã€MATLABã«ãŠã„ã¦å›³ï¼ˆFigureï¼‰ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã€f1 ã¯å›³ã®ãƒãƒ³ãƒ‰ãƒ«ï¼ˆhandleï¼‰ã‚’è¡¨ã—ã€'position' ã¯å›³ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’è¨­å®šã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã™ã€‚

ã“ã®ã‚³ãƒ¼ãƒ‰ã®å„éƒ¨åˆ†ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ï¼š

f1ï¼šã“ã‚Œã¯ã‚ã‚‰ã‹ã˜ã‚ä½œæˆã—ãŸå›³ã®ãƒãƒ³ãƒ‰ãƒ«ï¼ˆhandleï¼‰ã‚’æŒ‡ã—ã¾ã™ã€‚ã“ã®ãƒãƒ³ãƒ‰ãƒ«ã‚’ä½¿ç”¨ã—ã¦ç‰¹å®šã®å›³ã‚’æ“ä½œã§ãã¾ã™ã€‚

'position'ï¼šå›³ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’è¨­å®šã™ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚

[1 462 504 343]ï¼šã“ã®ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€å›³ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚å„è¦ç´ ã®æ„å‘³ã¯æ¬¡ã®é€šã‚Šã§ã™ï¼š

æœ€åˆã®è¦ç´ ï¼ˆ1ï¼‰ï¼šå›³ã®å·¦ç«¯ã®Xåº§æ¨™ä½ç½®ã‚’æŒ‡å®šã—ã¾ã™ã€‚
2ç•ªç›®ã®è¦ç´ ï¼ˆ462ï¼‰ï¼šå›³ã®ä¸Šç«¯ã®Yåº§æ¨™ä½ç½®ã‚’æŒ‡å®šã—ã¾ã™ã€‚
3ç•ªç›®ã®è¦ç´ ï¼ˆ504ï¼‰ï¼šå›³ã®å¹…ã‚’æŒ‡å®šã—ã¾ã™ã€‚
4ç•ªç›®ã®è¦ç´ ï¼ˆ343ï¼‰ï¼šå›³ã®é«˜ã•ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€f1 ã§æŒ‡å®šã•ã‚ŒãŸå›³ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’ (1, 462) ã‹ã‚‰å§‹ã¾ã‚Šã€å¹…ãŒ 504 ãƒ”ã‚¯ã‚»ãƒ«ã§é«˜ã•ãŒ 343 ãƒ”ã‚¯ã‚»ãƒ«ã«ãªã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€MATLABã®å›³ãŒæŒ‡å®šã•ã‚ŒãŸä½ç½®ã¨ã‚µã‚¤ã‚ºã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ã“ã®ã‚ˆã†ã«å›³ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã‚°ãƒ©ãƒ•ã‚„ãƒ—ãƒ­ãƒƒãƒˆãŒç”»é¢ä¸Šã§é©åˆ‡ã«é…ç½®ã•ã‚Œã€è¡¨ç¤ºã•ã‚Œã‚‹ç¯„å›²ãŒåˆ¶å¾¡ã§ãã¾ã™ã€‚

%}